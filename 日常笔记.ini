日常笔记
如何查看那个程序在监听端口:
[root@ubuntu ~]# netstat -tunlp | grep ":22"
[root@ubuntu ~]# ss -ntulp | grep ":22"
[root@ubuntu ~]# lsof -i:22
网络诊断工具
| 作用       | 工具/命令                      |
| -------- | -------------------------- |
| 测试网络联通   | fping                      |
| 显示正确路由表  | IP route    route          |
| 跟踪路由     |traceroute   tracepath  mtr |
| 确定服务器的使用 | nslookup  host  dig        |
| 抓包工具      | tcpdump   wireshark        |
| 安全扫描      | nmap   netcat（nc）          |
| 流量控制工具   | tc                         |
|  nslookup     |nslookup + 域名
|  telnet       |   telnet + IP/域名|telnet www.baidu.com 443
tracepath 追踪网络   tracepath -b 域名   traceroute 域名
抓包命令：tcpdump -i 端口 host ip 端口
nerdctl login -u lepton-service  registry.cn-sh-01.sensecore.cn
密码在这里： cat /root/.docker/config.json   用echo |Base64 -d解密一下
容器密码nerctl的密码
    kubectl get po -n ns-sensetime2023-cb5b8530    pt-zepjo6h4-worker-0  -oyaml | grep -i sec
    kubectl  get secret -A | grep ccr
    kubectl get  secret -n ns-sensetime2023-cb5b8530    ccr-private-image-secret -oyaml
    echo  eyJhdXRocyI6eyJyZWdpc3RyeS5zdC1zaC0wMS5zZW5zZWNvcmUuY24iOnsidXNlcm5hbWUiOiJsZXB0b24tc2VydmljZSIsInBhc3N3b3JkIjoiJW5LZ091JDlmMyJ9fX0= | base64 -d



2,4y   p 复制2-4行内容
lsscsi 查看还在的盘对应的/dev/sdaa  smartctl -i 所在的盘
/c1/e58/s10
查看集群的DNS解析的ip kubectl get configmap coredns -n kube-system -o yaml
kubectl logs -n kube-system coredns-6865786786-bjxmq --tail=100   dns日志
你把这个加到/etc/hosts里试试
    10.118.3.242 aoss-internal.cn-sh-01.sensecoreapi-oss.cn
    10.118.3.243 aoss-internal.cn-sh-01.sensecoreapi-oss.cn
    10.118.3.248 aoss-internal.cn-sh-01.sensecoreapi-oss.cn
    10.118.3.249 aoss-internal.cn-sh-01.sensecoreapi-oss.cn   


ipvsadm -L --connection 查看连接数是谁在占用
node:host-10-116-196-11-10.116.196.11;pod:spdkcsi-controller-1 和研发确认，spdkcsi-controller偶发重启时正常的现象，不影响业务，可忽略